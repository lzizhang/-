"use strict";function page(){new Header,new ScrollBtn,new Nav(0),new Footer}new page;var Register={email:$("#email"),password:$("#password"),twicePassword:$("#verifyPassword"),code:$("#verificationCode"),register:$("#register"),init:function(){this.verifyEmail(),this.verifyPassword(),this.verifyTwicePassword(),this.verifyRegister()},getCode:function(){this.code.prev().text(codeRandom())},verifyEmail:function(){this.email.on("blur",$.proxy(this.verifyEmailEvent,this))},verifyEmailEvent:function(){if(0==this.email.val())this.email.next().css("display","block").text("请输入您的Email地址");else{if(/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.test(this.email.val()))return this.email.next().css("display","none"),!0;this.email.next().css("display","block").text("请输入有效的Email地址")}},verifyPassword:function(){this.password.on("blur",$.proxy(this.verifyPasswordEvent,this))},verifyPasswordEvent:function(){if(/^.{0,5}$/.test(this.password.val()))this.password.next().css("display","block").text("密码不能小于6位");else{if(!/\s+/.test(this.password.val()))return this.password.next().css("display","none"),!0;this.password.next().css("display","block").text("密码中不能有空格")}},verifyTwicePassword:function(){this.twicePassword.on("blur",$.proxy(this.verifyTwicePasswordEvent,this))},verifyTwicePasswordEvent:function(){if(this.twicePassword.val()==this.password.val())return this.twicePassword.next().css("display","none"),!0;this.twicePassword.next().css("display","block").text("两次输入密码不一致")},verifyCodeEvent:function(){if(verifyCode.validate(document.getElementById("verificationCode").value))return this.code.next().css("display","none"),!0;this.code.next().css("display","block").text("验证码错误")},verifyRegister:function(){this.register.on("click",$.proxy(this.verifyVerifyRegister,this))},verifyVerifyRegister:function(s){if(s.preventDefault(),this.verifyEmailEvent(),this.verifyEmailEvent()&&this.verifyPasswordEvent()&&this.verifyTwicePasswordEvent()&&this.verifyCodeEvent()){var e=this.email.val(),i=this.password.val();$.ajax({type:"post",url:"../php/register.php",data:{username:e,password:i},dataType:"json",success:function(s){alert(s.info),location.href="index.html"},error:function(s){alert("系统错误")}})}}};Register.init();function codeRandom () {var str = "";for(var i=0;i<6;i++){var n = parseInt(48+Math.random()*(122-48+1));while(n>=58 && n<=64 || n>=91 && n<=96){n = parseInt(48+Math.random()*(122-48+1));}var char = String.fromCharCode(n);str+=char;}return str;};